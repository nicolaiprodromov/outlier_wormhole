/app/data/**/*.log /var/log/janitor/*.log {
    daily
    rotate 7
    compress
    delaycompress
    missingok
    notifempty
    create 0640 janitor janitor
    dateext
    dateformat -%Y%m%d
    maxsize 10M
    postrotate
        echo "[$(date '+%Y-%m-%d %H:%M:%S')] Logrotate completed" >> /var/log/janitor/rotation.log 2>&1 || true
    endscript
    sharedscripts
}

/app/data/raw_dumps/*.md {
    weekly
    rotate 4
    compress
    missingok
    notifempty
    maxsize 5M
    dateext
    dateformat -%Y%m%d
    copytruncate
}

/var/log/janitor/cleanup.log {
    weekly
    rotate 4
    compress
    delaycompress
    missingok
    notifempty
    create 0640 janitor janitor
    maxsize 50M
    dateext
}
